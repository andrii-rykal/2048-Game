function e(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=Array(n);r<n;r++)t[r]=e[r];return t}function n(n){return function(n){if(Array.isArray(n))return e(n)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(n,r){if(n){if("string"==typeof n)return e(n,void 0);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return e(n,void 0)}}(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var r,t=0,i=0,o=0,a=document.querySelector("tbody").children,c=document.querySelector(".game-header").querySelector("button"),d=document.querySelector(".game-score"),l=document.querySelectorAll(".field-cell");function s(e){e.innerText="",e.className="field-cell"}function f(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.random()>.1?2:4;a[n].children[e].innerText=r,a[n].children[e].classList.add("field-cell--".concat(r)),a[n].children[e].classList.remove("field-cell--".concat(r/2))}function u(e){var n=Math.floor(Math.random()*e);o!==n?(t=Math.floor((o=n)/4),i=o-4*t):u(e)}function T(e){var n=document.querySelector(".message-lose"),r=document.querySelector(".message-win"),t=document.querySelector(".message-start");switch(e){case"lose":r.classList.add("hidden"),t.classList.add("hidden"),n.classList.remove("hidden");break;case"win":n.classList.add("hidden"),t.classList.add("hidden"),r.classList.remove("hidden");break;case"nothing":n.classList.add("hidden"),r.classList.add("hidden"),t.classList.add("hidden")}}function h(e){for(var n=0,t=3;t>=0;t--){var i=a[t].children[e];if(""===i.innerText){n++;continue}3!==t&&n>0&&(f(e,t+n,i.innerText),s(i),n--,t++,r=!0)}}function x(e){for(var n=0,t=0;t<4;t++){var i=a[t].children[e];if(""===i.innerText){n++;continue}0!==t&&n>0&&(f(e,t-n,i.innerText),s(i),n--,t--,r=!0)}}function v(e){for(var n=0,t=3;t>=0;t--){var i=a[e].children[t];if(""===i.innerText){n++;continue}3!==t&&n>0&&(f(t+n,e,i.innerText),s(i),n--,t++,r=!0)}}function m(e){for(var n=0,t=0;t<4;t++){var i=a[e].children[t];if(""===i.innerText){n++;continue}0!==t&&n>0&&(f(t-n,e,i.innerText),s(i),n--,t--,r=!0)}}function y(e,r){return n(e).some(function(e){return n(e.children).some(function(e){return e.innerText===r})})}c.addEventListener("click",function(){n(l).map(function(e){s(e)}),d.innerText=0,u(16),f(t,i),u(16),f(t,i),T("nothing"),c.classList.remove("start"),c.classList.add("restart"),c.innerText="Restart"}),document.addEventListener("keydown",function(e){switch(e.key){case"ArrowDown":(function(){r=!1;for(var e=0;e<4;e++){h(e);for(var n=3;n>0;n--){var t=a[n].children[e],i=a[n-1].children[e];if(""!==t.innerText&&""!==i.innerText&&t.innerText===i.innerText){var o=2*+t.innerText;f(e,n,o),d.innerText=+d.innerText+o,s(i),r=!0}}h(e)}})();break;case"ArrowUp":(function(){r=!1;for(var e=0;e<4;e++){x(e);for(var n=0;n<3;n++){var t=a[n].children[e],i=a[n+1].children[e];if(""!==t.innerText&&""!==i.innerText&&t.innerText===i.innerText){var o=2*+t.innerText;f(e,n,o),d.innerText=+d.innerText+o,s(i),r=!0}}x(e)}})();break;case"ArrowRight":(function(){r=!1;for(var e=0;e<4;e++){v(e);for(var n=3;n>0;n--){var t=a[e].children[n],i=a[e].children[n-1];if(""!==t.innerText&&""!==i.innerText&&t.innerText===i.innerText){var o=2*+t.innerText;f(n,e,o),d.innerText=+d.innerText+o,s(i),r=!0}}v(e)}})();break;case"ArrowLeft":(function(){r=!1;for(var e=0;e<4;e++){m(e);for(var n=0;n<3;n++){var t=a[e].children[n],i=a[e].children[n+1];if(""!==t.innerText&&""!==i.innerText&&t.innerText===i.innerText){var o=2*+t.innerText;f(n,e,o),d.innerText=+d.innerText+o,s(i),r=!0}}m(e)}})()}r&&function e(){u(16),""===a[i].children[t].innerText?f(t,i):e()}();var n=y(a,"");if(!r&&!n){for(var o=0,c=0;c<3;c++)for(var l=0;l<3;l++){var b=a[c].children[l],L=a[c+1].children[l],g=a[c].children[l+1];(b.innerText===L.innerText||b.innerText===g.innerText)&&o++}o||T("lose")}y(a,"2048")&&T("win")});
//# sourceMappingURL=index.4885d65c.js.map
